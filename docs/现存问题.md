# 现存问题

### 服务端：

~~注册中心的部署~~

~~传输过程中如何表达视频~~

~~视频在服务端的存储和转发问题~~

~~c/c++ 是怎么支持的 HTTP 通讯~~

~~HTTP 到 对应结构体的转换问题~~

~~HTTP 请求 视频安全问题~~

~~用户鉴权问题~~

~~服务端的错误日志~~

~~下线安全性~~

~~心跳~~

string 分类

返回值分类

### 客户端：

客户端登陆问题

混乱的日志

缺少统一的控制界面

缺少对启动环境的约束

客户端重构 统一配置问题 ：

![image-20231114144118907](https://gitee.com/TTaket/typora-image/raw/master/image-20231114144118907.png)

大量函数命名问题

~~camera —> Room_main~~

析构函数

过多的头文件重复

public private 权限

### 网关：

黑名单分类

### 数据库：

~~服务端的数据库的分层~~

~~db 并发问题~~

redis

### 整体设计：

~~http 长连接的问题：~~

~~http 长连接并发发送下的半包 粘包问题~~

~~验证存不存在这样的问题：存在 通过设定 http 头部设定长度解决~~

HTTPS

~~jwt 在视频和音频上传下载的部署~~

~~dal 更改的原子操作~~

~~客户端提供阻塞的网络请求~~

~~客户端两个 pmanager 冲突~~

~~服务端网络架构 客户端网络架构~~

~~代码生成问题~~


---

# 重要的问题

### 1.网络通讯选型问题

视频发送到服务器采用 HTTP 还是 Websocket

HTTP：

1. websocket 对于服务器压力过大
2. 无状态的 Http 更适合多单元共同处理数据 符合集群
3. 但是 websocket 能够保证通讯的稳定性

考虑新的通讯方案 -rtmp rstp 等

1. 现在采用长连接的 http

### 2. 双端网络架构问题

客户端网络架构设计:

![服务端网络架构](../png/NET.png)

客户端重组器逻辑：

    接收包和对应时间 根据对应时间取出队首的元素作为使用 好处是可以接收乱序到达的信息 可以利用多线程提高发送和接收的效率

### 3. 用户鉴权的设计

### 4. 服务端分层架构

### 5. 边车代理 服务中心的问题

### 6. 网络瓶颈问题 如何改善的网络瓶颈

### 7. 负载均衡问题
